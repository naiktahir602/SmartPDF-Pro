<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T.R. Digital - SmartPDF PRO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.4.21/mammoth.browser.min.js"></script>
</head>
<body class="bg-slate-50 font-sans">

    <header class="p-6 bg-white shadow-md flex justify-between items-center sticky top-0 z-50">
        <div>
            <h1 class="text-2xl font-black text-blue-700 tracking-tighter">T.R. DIGITAL</h1>
            <p class="text-[10px] font-bold text-slate-400 uppercase">Premium PDF Associates</p>
        </div>
        <div id="user-info" class="flex items-center gap-4">
            <button id="login-btn" onclick="loginWithPhone()" class="bg-blue-600 text-white px-5 py-2 rounded-full text-sm font-bold">Login</button>
            <div id="auth-status" class="hidden text-right">
                <p id="user-phone" class="text-xs font-black text-slate-700"></p>
                <p id="plan-status" class="text-[10px] font-bold uppercase"></p>
            </div>
        </div>
    </header>

    <div class="bg-blue-600 p-10 text-center text-white">
        <h2 class="text-3xl font-black mb-2">Professional PDF Tools</h2>
        <p class="text-blue-100 opacity-80">10 Free Tools (With Ads) | 30+ Pro Tools (No Ads - â‚¹99/2 Months)</p>
    </div>

    <main class="max-w-6xl mx-auto p-6">
        <div id="tools-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
            </div>
    </main>

    <div id="ad-container" class="max-w-4xl mx-auto my-8 p-4 bg-slate-200 text-center rounded-xl text-slate-400 text-xs font-bold">
        ADVERTISEMENT (Free Plan Active)
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, RecaptchaVerifier, signInWithPhoneNumber } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

        // Your Firebase Config
        const firebaseConfig = {
            apiKey: "AIzaSyBr_apLRgu1EFgy3spXaPIMFVi-PiVpuWA",
            authDomain: "smartpdf-pro-951d2.firebaseapp.com",
            projectId: "smartpdf-pro-951d2",
            storageBucket: "smartpdf-pro-951d2.firebasestorage.app",
            messagingSenderId: "585179032601",
            appId: "1:585179032601:web:143e43985c7e9335a00e88"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        const OWNER_NUMBER = "+916005878981"; 
        let isPro = false;

        // 30 Tools Definition
        const tools = [
            { id: 1, name: "PDF Viewer", icon: "ðŸ‘ï¸", premium: false },
            { id: 2, name: "Page Count", icon: "ðŸ”¢", premium: false },
            { id: 3, name: "Rotate PDF", icon: "ðŸ”„", premium: false },
            { id: 4, name: "PDF to Image", icon: "ðŸ–¼ï¸", premium: false },
            { id: 5, name: "Metadata", icon: "â„¹ï¸", premium: false },
            { id: 6, name: "Grayscale", icon: "ðŸ", premium: false },
            { id: 7, name: "Text Extract", icon: "ðŸ“", premium: false },
            { id: 8, name: "PDF Info", icon: "ðŸ“‚", premium: false },
            { id: 9, name: "Zoom PDF", icon: "ðŸ”", premium: false },
            { id: 10, name: "Print PDF", icon: "ðŸ–¨ï¸", premium: false },
            { id: 11, name: "PDF to Word", icon: "ðŸ“„", premium: true },
            { id: 12, name: "Merge PDF", icon: "ðŸ”—", premium: true },
            { id: 13, name: "Protect PDF", icon: "ðŸ”’", premium: true },
            { id: 14, name: "Unlock PDF", icon: "ðŸ”“", premium: true },
            { id: 15, name: "Compress", icon: "ðŸ“‰", premium: true },
            { id: 16, name: "Split PDF", icon: "âœ‚ï¸", premium: true },
            { id: 17, name: "Watermark", icon: "ðŸ’§", premium: true },
            { id: 18, name: "Excel to PDF", icon: "ðŸ“Š", premium: true },
            { id: 19, name: "E-Sign", icon: "ðŸ–‹ï¸", premium: true },
            { id: 20, name: "OCR PDF", icon: "ðŸ‘ï¸â€ðŸ—¨ï¸", premium: true },
            // ... (more tools added to reach 30 in final render)
        ];

        // Auth Logic
        onAuthStateChanged(auth, async (user) => {
            const statusEl = document.getElementById('auth-status');
            const loginBtn = document.getElementById('login-btn');
            const adBox = document.getElementById('ad-container');

            if (user) {
                loginBtn.classList.add('hidden');
                statusEl.classList.remove('hidden');
                document.getElementById('user-phone').innerText = user.phoneNumber;

                if (user.phoneNumber === OWNER_NUMBER) {
                    isPro = true;
                    document.getElementById('plan-status').innerText = "Owner Access (Lifetime)";
                    document.getElementById('plan-status').className = "text-[10px] font-bold text-purple-600";
                    adBox.style.display = 'none';
                } else {
                    const docSnap = await getDoc(doc(db, "users", user.uid));
                    if (docSnap.exists()) {
                        const expiry = new Date(docSnap.data().expiryDate);
                        if (new Date() < expiry) {
                            isPro = true;
                            document.getElementById('plan-status').innerText = "Pro Plan (No Ads)";
                            document.getElementById('plan-status').className = "text-[10px] font-bold text-green-600";
                            adBox.style.display = 'none';
                        } else {
                            document.getElementById('plan-status').innerText = "Plan Expired";
                            document.getElementById('plan-status').className = "text-[10px] font-bold text-red-600";
                        }
                    } else {
                        document.getElementById('plan-status').innerText = "Free Plan";
                    }
                }
            }
            renderTools();
        });

        // Razorpay Payment
        window.startPayment = function() {
            var options = {
                "key": "YOUR_RAZORPAY_KEY", // Tomorrow: Add your Live Key here
                "amount": "9900",
                "name": "T.R. Digital",
                "description": "2 Months Pro Access",
                "handler": async function(res) {
                    const expiry = new Date();
                    expiry.setDate(expiry.getDate() + 60);
                    await setDoc(doc(db, "users", auth.currentUser.uid), {
                        expiryDate: expiry.toISOString(),
                        isPro: true
                    });
                    location.reload();
                }
            };
            new Razorpay(options).open();
        }

        // Feature Click Controller
        window.handleTool = (id, premium) => {
            if (premium && !auth.currentUser) {
                alert("T.R. Digital: Login required for Pro Tools!");
                return;
            }
            if (premium && !isPro) {
                if(confirm("T.R. Digital Pro: Pay â‚¹99 for 2 Months Access?")) {
                    startPayment();
                }
            } else {
                alert("Actual Tool Function Starting: Converting/Processing PDF...");
                // Here we call actual PDF processing functions
            }
        }

        function renderTools() {
            const grid = document.getElementById('tools-grid');
            grid.innerHTML = tools.map(t => `
                <div onclick="handleTool(${t.id}, ${t.premium})" class="p-6 bg-white border border-slate-200 rounded-3xl text-center hover:scale-105 transition-all cursor-pointer shadow-sm hover:shadow-xl">
                    <div class="text-4xl mb-3">${t.icon}</div>
                    <div class="font-black text-slate-800 text-sm leading-tight">${t.name}</div>
                    <div class="mt-2 text-[9px] font-black uppercase tracking-tighter ${t.premium ? 'text-blue-600' : 'text-slate-400'}">
                        ${t.premium ? 'Pro (â‚¹99)' : 'Free'}
                    </div>
                </div>
            `).join('');
        }
    </script>
</body>
</html>
